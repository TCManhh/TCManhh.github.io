<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Tài liệu Đại học Công nghệ (UET) - Môn học & Giáo trình - StuShare
    </title>
    <meta
      name="description"
      content="Tổng hợp tài liệu, slide, giáo trình các môn học chuyên ngành tại Trường Đại học Công nghệ - ĐHQGHN (UET). Tìm kiếm tài liệu CNTT, Điện tử viễn thông và hơn thế nữa."
    />
    <meta
      name="keywords"
      content="UET, Đại học Công nghệ, tài liệu UET, slide, giáo trình, CNTT, Điện tử viễn thông, INT2202, INT2212, StuShare"
    />
    <link rel="canonical" href="/truong-dai-hoc/uet.html" />
    <meta
      property="og:title"
      content="Tài liệu Đại học Công nghệ (UET) - Môn học & Giáo trình - StuShare"
    />
    <meta
      property="og:description"
      content="Tổng hợp tài liệu, slide, giáo trình các môn học chuyên ngành tại Trường Đại học Công nghệ - ĐHQGHN (UET)."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="/truong-dai-hoc/uet.html" />
    <link rel="stylesheet" href="/style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Trang chủ",
            "item": "/index.html"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "Tài Liệu Trường Đại học & Học viện",
            "item": "/truong-dai-hoc.html"
          },
          {
            "@type": "ListItem",
            "position": 3,
            "name": "Trường Đại học Công nghệ"
          }
        ]
      }
    </script>
  </head>
  <body class="has-fixed-breadcrumb">
    <div id="header-placeholder"></div>

    <div id="breadcrumb-placeholder"></div>

    <main>
      <section class="university-hero">
        <div class="container">
          <img
            src="https://upload.wikimedia.org/wikipedia/vi/thumb/b/bf/Logo_HUET.svg/186px-Logo_HUET.svg.png?20200610051238"
            alt="Logo UET"
            class="university-hero-logo"
          />
          <div class="university-hero-info">
            <h1>Trường Đại học Công nghệ - Đại học Quốc gia Hà Nội</h1>
            <p>Khám phá tài liệu các môn học chuyên ngành.</p>
          </div>
        </div>
      </section>

      <section class="filter-bar">
        <div class="container">
          <input
            type="text"
            id="subjectSearchInput"
            placeholder="Tìm kiếm môn học, ví dụ: Cấu trúc dữ liệu, Lập trình C++..."
          />
        </div>
      </section>

      <section class="subjects-list">
        <div class="container">
          <h2 class="faculty-title">Khoa Công nghệ Thông tin</h2>
          <div class="no-results-message" id="no-results-cntt">
            Không tìm thấy môn học nào phù hợp với từ khóa của bạn.
          </div>
          <div class="subject-grid">
            <a href="/truong-dai-hoc/uet/cntt-csdl.html" class="subject-card">
              <i class="fas fa-database"></i>
              <h3>Cơ sở dữ liệu</h3>
              <p class="subject-code">INT2202</p>
            </a>
            <a href="/truong-dai-hoc/uet/cntt-ktmt.html" class="subject-card">
              <i class="fas fa-microchip"></i>
              <h3>Kiến trúc máy tính</h3>
              <p class="subject-code">INT2212</p>
            </a>
            <a href="/truong-dai-hoc/uet/cntt-xstk.html" class="subject-card">
              <i class="fas fa-chart-bar"></i>
              <h3>Xác suất thống kê</h3>
              <p class="subject-code">INT1101</p>
            </a>
            <a href="/truong-dai-hoc/uet/cntt-ctdlgt.html" class="subject-card">
              <i class="fas fa-code"></i>
              <h3>Cấu Trúc Dữ Liệu và Giải Thuật</h3>
              <p class="subject-code">INT2210</p>
            </a>
            <a href="/truong-dai-hoc/uet/cntt-lthdt.html" class="subject-card">
              <i class="fas fa-object-group"></i>
              <h3>Lập trình hướng đối tượng</h3>
              <p class="subject-code">INT2204</p>
            </a>
          </div>

          <h2 class="faculty-title">Khoa Điện tử Viễn thông</h2>
          <div class="no-results-message" id="no-results-dtvt">
            Không tìm thấy môn học nào phù hợp với từ khóa của bạn.
          </div>
          <div class="subject-grid"></div>
        </div>
      </section>
    </main>

    <div id="footer-placeholder"></div>
    <script src="/assets/js/layout.js"></script>

    <script>
      function updateBreadcrumb() {
        const placeholder = document.getElementById("breadcrumb-placeholder");
        const schemaScript = document.querySelector(
          'script[type="application/ld+json"]'
        );

        if (!placeholder || !schemaScript) {
          console.warn(
            "Không tìm thấy placeholder hoặc schema cho breadcrumb."
          );
          return;
        }

        try {
          const breadcrumbData = JSON.parse(schemaScript.textContent);

          if (
            breadcrumbData["@type"] === "BreadcrumbList" &&
            breadcrumbData.itemListElement
          ) {
            const nav = document.createElement("nav");
            nav.className = "breadcrumb";
            const container = document.createElement("div");
            container.className = "container";
            const ol = document.createElement("ol");

            breadcrumbData.itemListElement.forEach((item) => {
              const li = document.createElement("li");
              if (item.item) {
                const a = document.createElement("a");
                a.href = item.item;
                a.textContent = item.name;
                li.appendChild(a);
              } else {
                li.textContent = item.name;
                li.classList.add("active");
              }
              ol.appendChild(li);
            });

            container.appendChild(ol);
            nav.appendChild(container);
            placeholder.replaceWith(nav);
          }
        } catch (e) {
          console.error("Lỗi khi tạo breadcrumb từ schema:", e);
        }
      }

      /**
       * � HỆ THỐNG TÌM KIẾM MÔN HỌC - TỐI ƯU TỐC ĐỘ
       * Cải tiến v2.0:
       * - ⚡ Pre-normalize data (cache 1 lần)
       * - ⚡ Cache DOM queries (tránh query lại)
       * - ⚡ Debounce 150ms (nhanh hơn 50%)
       * - ⚡ Early exit optimization
       * - ✅ Hỗ trợ tiếng Việt có/không dấu
       * - ✅ Không phân biệt hoa/thường
       * - ✅ Tìm theo tên + mã môn
       */

      // ===== CACHE & OPTIMIZATION =====
      const searchCache = {
        input: null,
        facultySections: [],
        initialized: false,
      };

      // Hàm loại bỏ dấu tiếng Việt (tối ưu với cache)
      const removeVietnameseTones = (() => {
        const cache = new Map();
        return function (str) {
          if (cache.has(str)) return cache.get(str);
          const normalized = str
            .normalize("NFD")
            .replace(/[\u0300-\u036f]/g, "")
            .replace(/đ/g, "d")
            .replace(/Đ/g, "D");
          cache.set(str, normalized);
          return normalized;
        };
      })();

      // Pre-normalize và cache dữ liệu môn học
      function initializeSearchData() {
        if (searchCache.initialized) return;

        searchCache.input = document.getElementById("subjectSearchInput");
        const facultyTitles = document.querySelectorAll(
          ".subjects-list .container > h2.faculty-title"
        );

        facultyTitles.forEach((facultyTitle) => {
          const nextEl = facultyTitle.nextElementSibling;
          const subjectGrid = nextEl?.classList.contains("no-results-message")
            ? nextEl.nextElementSibling
            : nextEl;

          const noResultsMsg = nextEl?.classList.contains("no-results-message")
            ? nextEl
            : null;

          if (!subjectGrid?.classList.contains("subject-grid")) return;

          const cards = Array.from(
            subjectGrid.querySelectorAll(".subject-card")
          );

          // Pre-normalize tất cả dữ liệu 1 lần duy nhất
          cards.forEach((card) => {
            const h3 = card.querySelector("h3");
            const code = card.querySelector(".subject-code");

            if (h3 && code) {
              // Lưu dữ liệu đã chuẩn hóa vào dataset
              card.dataset.searchName = removeVietnameseTones(
                h3.textContent.toLowerCase()
              );
              card.dataset.searchCode = code.textContent.toLowerCase();
            }
          });

          searchCache.facultySections.push({
            title: facultyTitle,
            grid: subjectGrid,
            noResultsMsg,
            cards,
          });
        });

        searchCache.initialized = true;
        console.log(
          "✅ Search data initialized:",
          searchCache.facultySections.length,
          "sections"
        );
      }

      // Hàm tìm kiếm môn học (tối ưu cao)
      function filterSubjects() {
        // Early exit nếu chưa init
        if (!searchCache.initialized) {
          initializeSearchData();
        }

        const searchKeyword = removeVietnameseTones(
          searchCache.input.value.trim().toLowerCase()
        );
        const isEmpty = searchKeyword === "";

        // Duyệt qua các khoa (dùng dữ liệu đã cache)
        searchCache.facultySections.forEach((section) => {
          let visibleCount = 0;

          // Tối ưu: dùng for loop thay vì forEach (nhanh hơn)
          for (let i = 0; i < section.cards.length; i++) {
            const card = section.cards[i];

            // Đọc dữ liệu đã pre-normalize từ dataset (siêu nhanh)
            const isMatch =
              isEmpty ||
              card.dataset.searchName.includes(searchKeyword) ||
              card.dataset.searchCode.includes(searchKeyword);

            // Batch update style
            card.style.display = isMatch ? "" : "none";
            if (isMatch) visibleCount++;
          }

          // Update UI
          const showNoResults = visibleCount === 0 && !isEmpty;
          if (section.noResultsMsg) {
            section.noResultsMsg.style.display = showNoResults
              ? "block"
              : "none";
          }
          section.title.style.display = showNoResults ? "none" : "";
        });
      }

      // Debounce tối ưu (giảm từ 300ms → 150ms)
      let searchTimeout;
      function debounceSearch() {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(filterSubjects, 150);
      }

      // Khởi tạo tìm kiếm khi DOM đã load
      document.addEventListener("DOMContentLoaded", function () {
        // Khởi tạo cache ngay khi load
        setTimeout(initializeSearchData, 100);

        const searchInput = document.getElementById("subjectSearchInput");
        if (searchInput) {
          // Sử dụng passive listener để tăng hiệu năng scroll
          searchInput.addEventListener("input", debounceSearch, {
            passive: true,
          });
          searchInput.addEventListener("keyup", function (event) {
            if (event.key === "Enter") {
              clearTimeout(searchTimeout);
              filterSubjects();
            }
          });

          console.log("🔍 Search system ready (v2.0 - optimized)");
        }
      });
    </script>
  </body>
</html>
