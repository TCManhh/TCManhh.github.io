<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>
      Slide: C3.2 - Các phép toán đại số quan hệ - Cơ sở dữ liệu - StuShare
    </title>
    <meta
      name="description"
      content="Tài liệu trình bày về Đại số quan hệ trong môn Cơ sở dữ liệu, bao gồm các thao tác cập nhật (thêm, xóa, sửa) và các phép toán đại số như phép toán tập hợp (hợp, giao, trừ), phép chọn, chiếu, nối, chia và các hàm kết hợp."
    />
    <meta name="robots" content="index, follow" />
    <link
      rel="canonical"
      href="truong-dai-hoc\uet\cntt-csdl\slides\GVkhoaCNTT-documents\c3-2-viewer.html"
    />

    <!-- Tăng tốc load viewer -->
    <link
      rel="preconnect"
      href="https://stushare-worker.kysirong2008.workers.dev"
      crossorigin
    />
    <link
      rel="dns-prefetch"
      href="//stushare-worker.kysirong2008.workers.dev"
    />

    <!-- Redirect an toàn: nhanh (~1s) nhưng vẫn cho Google render -->
    <meta http-equiv="refresh" content="1;url=c3-2-viewer.html" />
    <script>
      window.addEventListener("DOMContentLoaded", () => {
        setTimeout(() => {
          location.replace("c3-2-viewer.html");
        }, 300);
      });
    </script>
    <noscript>
      <meta http-equiv="refresh" content="1;url=c3-2-viewer.html" />
    </noscript>
  </head>
  <body>
    <h1>3.2. Đại số quan hệ</h1>
    <p><em>Môn học: Nhập môn Cơ sở dữ liệu</em></p>
    <p>
      <em>Người dùng sẽ được chuyển sang trang trình chiếu sau ít giây...</em>
    </p>

    <!-- BẮT BUỘC: chép đầy đủ TOÀN BỘ nội dung dưới đây vào các thẻ HTML phù hợp -->

    <h2>Giới thiệu Ngôn ngữ Đại số quan hệ</h2>
    <p>Xét một số yêu cầu trên quan hệ NHANVIEN:</p>
    <ul>
      <li>Thêm mới một nhân viên</li>
      <li>Chuyển nhân viên có tên là “Tùng” sang phòng số 1</li>
      <li>
        Cho biết họ tên và ngày sinh các nhân viên có lương thấp hơn 50000
      </li>
    </ul>
    <p>Xét một số thao tác xử lý trên quan hệ SINHVIEN, SV_DIEM, MONHOC.</p>
    <p>Các thao tác:</p>
    <ol>
      <li>
        Cập nhật: Thay đổi dữ liệu (trạng thái CSDL):
        <ul>
          <li>Thêm các bộ mới</li>
          <li>Xóa các bộ</li>
          <li>Sửa giá trị của bộ</li>
        </ul>
      </li>
      <li>
        Các phép toán đại số quan hệ:
        <ul>
          <li>Các phép toán tập hợp: hợp, giao, trừ, tích Đề-các</li>
          <li>
            Các phép toán trên cơ sở dữ liệu quan hệ: chọn, chiếu, đổi tên, nối,
            chia
          </li>
        </ul>
      </li>
      <li>Một số phép toán bổ sung: nhóm, nối ngoài</li>
    </ol>

    <h2>1. Các thao tác cập nhật</h2>
    <p>
      Nội dung (trạng thái) của CSDL có thể được cập nhật bằng các thao tác:
    </p>
    <ul>
      <li>Thêm (insert)</li>
      <li>Xóa (delete)</li>
      <li>Sửa (modify)</li>
    </ul>
    <p>
      Chú ý: Chỉ đề cập thao tác và ý nghĩa, không nêu câu lệnh trong HQTCSDL cụ
      thể. Xét trên một thể hiện của lược đồ quan hệ.
    </p>

    <h3>1.1. Thêm bộ mới vào quan hệ</h3>
    <p>
      Được diễn đạt: INSERT(R; t), trong đó R là tên Lược đồ quan hệ và t là bộ
      mới cần thêm vào.
    </p>
    <p>Ví dụ:</p>
    <ul>
      <li>INSERT(SINHVIEN; “T5”,”Nguyen”, “Hong”, “Anh”)</li>
      <li>INSERT(SV_DIEM; “T5”, “Int1002”, 9)</li>
      <li>INSERT(SV_DIEM; “T5”, “Int1004”, 7)</li>
      <li>INSERT(SV_DIEM; “T5”,” Int1001”, 12)</li>
    </ul>
    <p>Có thể vi phạm ràng buộc:</p>
    <ul>
      <li>Ràng buộc miền</li>
      <li>Ràng buộc khóa, toàn vẹn thực thể</li>
      <li>Ràng buộc tham chiếu</li>
    </ul>
    <p>Xử lý: Loại bỏ.</p>

    <h3>1.2. Thao tác xóa</h3>
    <p>
      Xóa một hoặc nhiều bộ theo điều kiện nào đó. Được diễn đạt: DELETE(R; f),
      trong đó R là quan hệ và f là biểu thức điều kiện (biểu thức đại số).
    </p>
    <p>Ví dụ:</p>
    <ul>
      <li>DELETE(SINHVIEN; Masv = “T1”)</li>
      <li>DELETE(SV_DIEM; Masv = “T2”)</li>
    </ul>
    <p>
      Ràng buộc có thể vi phạm: Ràng buộc tham chiếu (xóa bộ được tham chiếu).
      Xử lý:
    </p>
    <ul>
      <li>Loại bỏ phép toán xóa</li>
      <li>Xóa lan truyền</li>
      <li>Sửa đổi giá trị khóa ngoài tham chiếu (null)</li>
    </ul>

    <h3>1.3. Cập nhật các bộ</h3>
    <p>
      Thay đổi giá trị của các thuộc tính trong một hoặc nhiều bộ. Được diễn
      đạt: MODIFY(R; f;&lt;ai = vi,…&gt;), trong đó R là quan hệ, f là biểu thức
      đại số xác định các bộ, ai là thuộc tính cần sửa, vi là giá trị mới của
      thuộc tính.
    </p>
    <p>Ví dụ:</p>
    <ul>
      <li>
        Tăng hệ số lương thêm 10 % cho tất cả nhân viên trong quan hệ NHANVIEN:
        MODIFY (NHANVIEN; all; Luong=Luong*1.1)
      </li>
      <li>
        “Chuyển “ nhân viên “Tùng” từ phòng Nghiên cứu sang phòng Kỹ thuật:
        MODIFY (NHANVIEN; Ten =“Tùng”; Phong = 4)
      </li>
      <li>
        Sửa số tín chỉ thành 2 của môn học có mã là Int1001 trong quan hệ
        MONHOC: MODIFY(MONHOC; Mamon=“Int1001”; sotinchi=2)
      </li>
    </ul>
    <p>
      Các ràng buộc có thể vi phạm: Ràng buộc miền, cập nhật khóa chính (tương
      đương xóa, chèn), khóa ngoài (tham chiếu).
    </p>

    <h2>2. Các phép toán đại số quan hệ</h2>
    <p>
      Toán hạng (biến) là các quan hệ (tập hợp các bộ). Toán tử là các phép toán
      đại số quan hệ. Kết quả trả về là một quan hệ. Biểu thức được gọi là câu
      truy vấn, là chuỗi các phép toán đại số quan hệ.
    </p>
    <h3>Toán tử (operations)</h3>
    <ul>
      <li>
        Trên tập hợp: Hợp  (union), Giao  (intersec), Trừ − (difference)
      </li>
      <li>
        Rút trích 1 phần của quan hệ: Chọn  (selection), Chiếu  (projection)
      </li>
      <li>
        Kết hợp các quan hệ: Tích Đề-các  (Cartesian product), Nối (join)
      </li>
      <li>Đổi tên </li>
    </ul>

    <h3>2.1. Phép toán tập hợp</h3>
    <p>
      Thực hiện trên hai quan hệ (tập hợp các bộ): Phép toán hợp R  S, Phép
      toán giao R  S, Phép trừ R − S.
    </p>
    <p>
      <strong
        >Tính khả hợp (tương thích đồng nhất - Union Compatibility):</strong
      >
      Hai lược đồ quan hệ R(A1, A2, …, An) và S(B1, B2, …, Bn) là khả hợp nếu
      cùng bậc n và DOM(Ai)=DOM(Bi) cho 1 ≤ i ≤ n. Kết quả là một quan hệ có các
      thuộc tính trùng tên với thuộc tính của quan hệ thứ nhất (R).
    </p>

    <h4>2.1.a Phép toán hợp</h4>
    <p>
      Quan hệ R và S phải khả hợp. Phép hợp của R và S, ký hiệu R  S, là một
      quan hệ gồm các bộ thuộc R hoặc thuộc S, hoặc cả hai (các bộ trùng lặp sẽ
      bị bỏ). R  S = { t | tR  tS }.
    </p>

    <h4>2.1.b. Phép toán giao</h4>
    <p>
      Hai quan hệ R và S phải khả hợp. Phép giao của R và S, ký hiệu R  S, kết
      quả gồm các bộ thuộc R đồng thời thuộc S. R  S = { t | tR  tS }.
    </p>

    <h4>2.1.c. Phép toán trừ</h4>
    <p>
      Hai quan hệ R và S phải khả hợp. Phép trừ của R và S, ký hiệu R − S, quan
      hệ kết quả gồm các bộ thuộc R và không thuộc S. R − S = { t | tR  tS }.
    </p>

    <h3>2.2. Các phép toán Cơ sở dữ liệu</h3>
    <h4>2.2.a. Phép toán chọn</h4>
    <p>
      Để chọn ra các bộ của quan hệ R thỏa mãn điều kiện chọn P. Ký hiệu:  P
      (R).
    </p>
    <p>
      P là điều kiện chọn gồm các mệnh đề có dạng: &lt;tên thuộc tính&gt;
      &lt;phép so sánh&gt; &lt;hằng số&gt; hoặc &lt;tên thuộc tính&gt; &lt;phép
      so sánh&gt; &lt;tên thuộc tính&gt;. Các mệnh đề được nối lại nhờ các phép
      toán , , .
    </p>
    <p>
      Kết quả trả về là một quan hệ cùng danh sách thuộc tính với R, bao gồm các
      bộ của R thỏa mãn điều kiện P.
    </p>
    <p>Tính chất: Giao hoán và kết hợp.</p>

    <h4>2.2.b. Phép toán chiếu</h4>
    <p>
      Lấy ra một quan hệ gồm một số cột của quan hệ R đã có. Ký hiệu:  A1, A2,
      …, Ak(R), với A1, A2, ..., Ak là tập con thuộc tính của R.
    </p>
    <p>
      Kết quả trả về là một quan hệ có k thuộc tính A1,…Ak. Các bộ được lấy từ
      tất cả các bộ của R (loại các bộ trùng).
    </p>

    <h3>Chuỗi phép toán và phép toán đổi tên</h3>
    <p>
      Có thể kết hợp các phép toán đại số quan hệ bằng cách lồng các phép toán
      hoặc thực hiện từng phép toán một, kết quả của phép toán trước là đầu vào
      của phép toán sau.
    </p>
    <p>
      <strong>Phép toán gán (, =):</strong> Được sử dụng để nhận kết quả trả về
      của một phép toán, thường là kết quả trung gian.
    </p>
    <p>
      <strong>Phép toán đổi tên ( - rho):</strong> Được dùng để đổi tên, thuộc
      tính của lược đồ quan hệ. Các dạng: S(R), (X, C, D)(R), S(X,C,D)(R).
    </p>

    <h3>Phép toán tích Đề-các (Cartesian Product)</h3>
    <p>
      Để kết hợp các bộ của 2 quan hệ với nhau. Cho lược đồ R(A1,,An),
      S(B1,..Bm). Ký hiệu: R  S.
    </p>
    <p>
      Kết quả là quan hệ Q(A1,,An, B1,..Bm). Mỗi bộ của Q là tổng hợp giữa 1 bộ
      trong R và 1 bộ trong S. Nếu R có i bộ và S có k bộ thì Q sẽ có i  k bộ.
    </p>
    <p>Thông thường theo sau phép tích Đề-các là phép chọn.</p>

    <h3>Phép toán nối (join)</h3>
    <p>
      Nối 2 bộ có liên quan (thỏa mãn điều kiện nối) từ 2 quan hệ thành 1 bộ,
      tạo quan hệ mới. Ký hiệu R f S, với f là điều kiện nối.
    </p>
    <p>
      Kết quả là một quan hệ Q= { &lt;t,v&gt; | f(t,v) đúng, tR, v  S}. Điều
      kiện nối f cơ bản có dạng Ai  Bj, với Ai và Bj có cùng miền giá trị.
    </p>
    <p>Phân loại:</p>
    <ul>
      <li>
        <strong>Nối theta:</strong> Dạng tổng quát, f là điều kiện nối bất kỳ.
      </li>
      <li>
        <strong>Nối bằng (equi join):</strong> Khi f là điều kiện so sánh bằng.
      </li>
      <li>
        <strong>Nối tự nhiên (natural join):</strong> Là nối bằng trên các thuộc
        tính cùng tên, và loại bỏ một thuộc tính trùng lặp trong kết quả. Ký
        hiệu R * S.
      </li>
    </ul>

    <h3>Phép toán chia</h3>
    <p>
      Lấy ra tất cả các bộ từ quan hệ R sao cho thỏa với tất cả các bộ trong
      quan hệ S. Ký hiệu R  S.
    </p>
    <p>
      Giả thiết R(Z), S(X) với X  Z. Kết quả là quan hệ T(Y), với Y=Z-X. Với
      mỗi bộ t  T, với mọi u  S thì &lt;u,t&gt;  R.
    </p>
    <p>Ví dụ: Đưa ra các nhân viên có tất cả các kỹ năng yêu cầu.</p>

    <h2>Các phép toán khác</h2>
    <h3>Hàm kết hợp (Aggregation function)</h3>
    <p>
      Đối số có thể là thuộc tính (tập hợp các giá trị) và trả về một giá trị
      đơn (vô hướng). Các hàm bao gồm: AVG, MIN, MAX, SUM, COUNT.
    </p>

    <h3>Phép toán gom nhóm (Grouping)</h3>
    <p>
      Được dùng để phân chia quan hệ thành nhiều nhóm dựa trên thuộc tính phân
      nhóm nào đó. Ký hiệu: G1,G2,..,Gk F F1(A1), F2(A2), …, Fn(An)(R), trong đó
      Gi là thuộc tính gom nhóm, Fi là hàm kết hợp.
    </p>

    <h3>Phép toán nối ngoài (Outer join)</h3>
    <p>
      Mở rộng phép nối để tránh mất mát thông tin bằng cách lấy thêm các bộ
      không thỏa điều kiện nối và điền giá trị null.
    </p>
    <p>Có 3 dạng:</p>
    <ol>
      <li>Nối ngoài trái</li>
      <li>Nối ngoài phải</li>
      <li>Nối ngoài đầy đủ</li>
    </ol>

    <h2>Bài tập</h2>
    <p>Bài tập về xác định kết quả các phép toán nối, nối ngoài.</p>
    <p>Bài tập trên cơ sở dữ liệu CÔNGTY:</p>
    <ul>
      <li>
        Đưa ra tên và địa chỉ, tên đơn vị của tất cả các nhân viên làm việc cho
        đơn vị.
      </li>
      <li>
        Với mỗi dự án có địa điểm tại Hà nội, hãy liệt kê mã số dự án, mã số của
        đơn vị kiểm soát, Tên, địa chỉ và ngày sinh của người quản lý đơn vị.
      </li>
      <li>
        Tìm tên của các nhân viên làm việc trên tất cả các dự án do đơn vị có mã
        số 5 kiểm soát.
      </li>
      <li>
        Tạo ra một danh sách các mã số dự án đối với các dự án có một nhân viên
        hoặc một người quản lý đơn vị kiểm soát dự án có tên là ‘Nam’.
      </li>
      <li>
        Đưa ra tên của tất cả các nhân viên có nhiều hơn hoặc bằng 2 người phụ
        thuộc.
      </li>
      <li>Đưa ra các nhân viên (Mã, họ và tên) không có người phụ thuộc.</li>
      <li>
        Đưa ra tên của những người quản lý có ít nhất là một người phụ thuộc.
      </li>
    </ul>

    <!-- QA (chỉ là comment, không hiển thị; phục vụ kiểm tra đủ mục):
       - Tổng số ký tự (ước lượng) của nội dung body: 7500
       - Danh sách tiêu đề (theo thứ tự): [H1: 3.2. Đại số quan hệ], [H2: Giới thiệu Ngôn ngữ Đại số quan hệ], [H2: 1. Các thao tác cập nhật], [H3: 1.1. Thêm bộ mới vào quan hệ], [H3: 1.2. Thao tác xóa], [H3: 1.3. Cập nhật các bộ], [H2: 2. Các phép toán đại số quan hệ], [H3: Toán tử (operations)], [H3: 2.1. Phép toán tập hợp], [H4: 2.1.a Phép toán hợp], [H4: 2.1.b. Phép toán giao], [H4: 2.1.c. Phép toán trừ], [H3: 2.2. Các phép toán Cơ sở dữ liệu], [H4: 2.2.a. Phép toán chọn], [H4: 2.2.b. Phép toán chiếu], [H3: Chuỗi phép toán và phép toán đổi tên], [H3: Phép toán tích Đề-các (Cartesian Product)], [H3: Phép toán nối (join)], [H3: Phép toán chia], [H2: Các phép toán khác], [H3: Hàm kết hợp (Aggregation function)], [H3: Phép toán gom nhóm (Grouping)], [H3: Phép toán nối ngoài (Outer join)], [H2: Bài tập]
       - Ghi chú phần OCR đã chép: [Toàn bộ các trang chứa bảng biểu và sơ đồ đã được chuyển thành văn bản và cấu trúc HTML phù hợp.]
  --></body>
</html>
